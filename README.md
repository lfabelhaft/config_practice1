1. Общее описание

Эмулятор командной оболочки — это консольное приложение, имитирующее поведение UNIX-подобного терминала.
Программа поддерживает ввод пользовательских команд в интерактивном режиме, чтение стартовых скриптов, работу с виртуальной файловой системой (VFS) и базовые команды командной строки (ls, cd, echo, find, chmod, cp).

Цель проекта — продемонстрировать реализацию REPL-интерфейса (Read–Eval–Print Loop), парсинг команд, работу с виртуальной файловой системой и поддержку пользовательской конфигурации.

2. Описание функций и настроек

Основные функции:
 • REPL (Read–Eval–Print Loop) — непрерывный ввод и выполнение команд.
 • Парсер команд — разбирает аргументы, поддерживает подстановку переменных среды $HOME, $USER и др.
 • VFS (Virtual File System) — хранится в памяти, загружается из JSON.
 • Поддержка команд:
 • ls [путь] — вывод содержимого директории.
 • cd [путь] — смена текущей директории.
 • echo [текст] — вывод текста (с поддержкой переменных окружения).
 • find [имя] — поиск файла/директории по имени.
 • chmod [путь] [права] — изменение прав файла (эмуляция).
 • cp [источник] [назначение] — копирование файла.
 • vfs-init — сброс виртуальной файловой системы.
 • exit — выход из программы.

 Параметры запуска:

Поддерживаются параметры командной строки :
Параметр Назначение
--vfs путь к JSON-файлу виртуальной файловой системы
--script путь к стартовому скрипту команд
--debug (опционально) включает отладочный вывод параметров

4. Команды для сборки и запуска
   Запуск REPL (этап 1):
   python stage1.py
   
   Запуск с конфигурацией и скриптом (этап 2): 
   python stage2.py --start-script start_script.txt
   
   Запуск с VFS и командами (этап 3 и далее):
   python stage3.py --vfs-path vfs.json --start-script start_script2.txt
   Этап 4
   python stage4.py --start-script start_stage4.txt
   Этап 5
   python stage5.py --start-script start_stage5.txt

5. Примеры использования
Пример 1. Интерактивный режим

$ python3 stage1.py
VFS> ls
Команда: ls, аргументы: []
VFS> cd /home
Команда: cd, аргументы: ['/home']
VFS> echo $HOME
/Users/leah
VFS> exit
Выход из эмулятора.

Пример 2. Работа с VFS

$ python3 stage3_vfs.py --vfs ./vfs.json
[DEBUG] Загрузка виртуальной файловой системы...
VFS> ls /home/user
file1.txt
file2.txt
VFS> find file1.txt
/home/user/file1.txt

Пример 3. Стартовый скрипт

start_script.txt

ls
cd /home/user
echo $USER
exit

Запуск:

python3 stage2_config.py --vfs ./vfs.json --script ./start_script.txt

Вывод:

[DEBUG] VFS path: ./vfs.json
[DEBUG] Script path: ./start_script.txt
VFS> ls
Команда: ls, аргументы: []
VFS> cd /home/user
Команда: cd, аргументы: ['/home/user']
VFS> echo $USER
leah
VFS> exit
Выход из эмулятора.

6. Тестирование

Можно создать дополнительные скрипты:

scripts/
├── make_vfs.sh
└── vfs_minimal.sh
